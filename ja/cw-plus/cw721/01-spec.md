# CW721仕様:非代替トークン

cw721パッケージのソースコード:[https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw721/README.md](https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw721/README.md)

CW721は、CosmWasmに基づく不均一なトークン仕様です.
名前とデザインは、イーサリアムのERC721標準に基づいています.
いくつかの改善があります.ここのタイプは渡すことができます
この仕様の契約を実装することを望んでいる、または呼び出し契約を通じて
標準のcw721契約.

仕様は複数の部分に分かれており、契約は
これらの機能のいくつかは実現されていますが、基本は実現されなければなりません.

## によると

これは、所有権、譲渡、および割り当てを扱います.これらはサポートする必要があります
すべてのCW721契約と同じように.すべてのトークンには所有者が必要であることに注意してください.
そしてIDカード. IDは任意の文字列であり、コントラクト内で一意です.

### 情報

`TransferNft {recipient、token_id}`-
これにより、トークンの所有権が「受信者」アカウントに譲渡されます.これは
秘密鍵によって制御されるアドレスに送信されることを意図しており、*送信されない*
コントラクトの場合、受信者に対するアクションがトリガーされます.

有効なトークンを指すには `token_id`が必要であり、` env.sender`は
その所有者はそれを譲渡するための手当を持っているかもしれません.

`SendNft {contract、token_id、msg}`-
これにより、トークンの所有権が「契約」アカウントに譲渡されます. `契約`
スマートコントラクトによって制御されるアドレスである必要があり、それは実現します
CW721レシーバーインターフェイス. `msg`は受信者に渡されます
コントラクト、およびtoken_id.

有効なトークンを指すには `token_id`が必要であり、` env.sender`は
その所有者はそれを譲渡するための手当を持っているかもしれません.

`承認{spender、token_id、expires}` -`spender`権限を付与します
指定されたトークンを転送または送信します.これは、次の条件下でのみ実行できます
`env.sender`は、指定された` token_id`または `operator`の所有者です.
各トークンは複数の消費者アカウントを持つことができ、それらは一度クリアされます
トークンが転送または送信されます.

`Revoke {spender、token_id}`-これにより、以前に付与された権限が取り消されます
指定された `token_id`を転送します.これは、次の状況でのみ付与できます
`env.sender`は、指定された` token_id`または `operator`の所有者です.

`ApproveAll {operator、expires}` -`operator`に送信または送信許可を付与します
`env.sender`が所有するすべてのトークン.この承認は所有者に関するものであり、
トークンは、将来所有者が受け取るトークンには適用されません.

`RevokeAll {operator}`-以前に付与された `ApproveAll`権限を取り消します
与えられた `オペレーター`に.

### お問い合わせ

`OwnerOf {token_id}`-指定されたトークンの所有者を返します.
そして、誰もがこの特定のトークンを承認しました.
トークンが不明な場合は、エラーが返されます.戻りタイプは
`所有者の応答{所有者}`.

`ApprovedForAll {owner、include_expired}`-利用可能なすべてのリスト
すべての所有者のトークンにアクセスします.戻りタイプは「ApprovedForAllResponse」です.
`include_expired`が設定されている場合は、期限切れの所有者が結果に表示されます.それ以外の場合は、
それらを無視します.

`NumTokens {}`-発行されたトークンの総数

### 受信者

`SendNft`の対応する部分は` ReceiveNft`であり、
CW721トークンの管理を希望する契約.これは通常*ではありません*
CW721契約によって実装されます.

`ReceiveNft {sender、token_id、msg}` -`SendNft`を処理するように設計されています
情報.契約アドレスは `env.sender`に保存されます
したがって、偽造することはできません.契約では、送信者が一致することを確認する必要があります
トークンコントラクトを処理することを想定しており、任意のアドレスを許可しません.

`sender`は、モバイルトークンをリクエストした元のアカウントです
また、 `msg`は` Binary`データであり、コントラクト固有のデータにデコードできます
情報.デフォルトのアクションが1つしかない場合、これは空にすることができます.
または、意図を明確にするための `ReceiveMsg`の変形である可能性があります.例えば、
取引所に送る場合、リストしたいトークンの価格を指定できます
にとって.

## メタデータ

### クエリ

`ContractInfo {}`-コントラクトに関するトップレベルのメタデータを返します.
つまり、 `name`と` symbol`です.

`NftInfo {token_id}`-特定のトークンに関するメタデータを返します.
戻り値は* ERC721メタデータJSONスキーマ*に基づいていますが、直接
契約から、ウリとしてではありません.画像リンクのみがウリです.

`AllNftInfo {token_id}` -`NftInfo`の結果を返します
そして、クライアントへの最適化としてのクエリとしての `OwnerOf`、これはかもしれません
両方のメッセージにNFTが表示されることを願っています.

## 列挙可能

### お問い合わせ

ページングは​​ `start_after`と` limit`によって実現されます.制限はリクエストです
クライアントによって設定され、設定されていない場合、契約は自動的にに設定されます
`DefaultLimit`(10を推奨).設定すると、 `MaxLimit`に使用されます
値(推奨30).コントラクトは他の `DefaultLimit`と` MaxLimit`を定義できます
この値はCW721仕様に違反していないため、お客様は信頼しないでください.
特定の値.

`start_after`が設定されていない場合、クエリは最初の結果を順番に返します
字句的に `token_id`でソートされています. `start_after`が設定されている場合は、
最初の `limit`トークン*は指定されたトークンの後にあります.これにより、直接
返された最後の結果( `token_id`)を取得し、それをページネーションに使用する
将来のクエリの「start_after」値として.

`Tokens {owner、start_after、limit}`-指定された所有者に属するすべてのtoken_idを一覧表示します.
戻りタイプは `TokensResponse {tokens:Vec <token_id>}`です.

`AllTokens {start_after、limit}`-ページ付けが必要です.制御されているすべてのtoken_idを一覧表示します
契約する.
